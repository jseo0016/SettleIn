<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SettleIn — Find Your People</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0b1220;       --card:#111a2e;   --muted:#8ea2c8;  --text:#eaf2ff;
      --brand:#6dd3a3;    --brand-2:#8ab6ff;--ring: rgba(141,214,186,0.45);
      --ok:#86efac;       --warn:#fbbf24;   --danger:#f87171;
      --border: rgba(255,255,255,.10);
      /* WhatsApp-like palette (light) */
      --wa-header:#075E54; --wa-in:#ffffff; --wa-out:#DCF8C6; --wa-border:rgba(0,0,0,.08);
    }
    :root[data-theme='light']{
      --bg:#f6f9ff;       --card:#ffffff;   --muted:#506289;  --text:#0b1220;
      --brand:#2dd4bf;    --brand-2:#60a5fa;--ring: rgba(96,165,250,0.45);
      --ok:#16a34a;       --warn:#d97706;   --danger:#dc2626;
      --border: rgba(0,0,0,.10);
      --wa-header:#128C7E; --wa-in:#ffffff; --wa-out:#DCF8C6; --wa-border:rgba(0,0,0,.08);
    }
    @media (prefers-color-scheme: dark){:root{--wa-header:#075E54; --wa-in:#1f2c34; --wa-out:#005c4b; --wa-border:rgba(255,255,255,.06);}}

    *{box-sizing:border-box}
    body{margin:0; font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,'Helvetica Neue',Arial; background:var(--bg); color:var(--text); line-height:1.55; transition: background .3s, color .3s}
    a{color:inherit; text-decoration:none}
    .wrap{max-width:1100px; margin:0 auto; padding:28px}
    header{position:sticky; top:0; backdrop-filter:saturate(1.2) blur(8px); background:linear-gradient(180deg, rgba(11,18,32,.85), rgba(11,18,32,.55)); border-bottom:1px solid rgba(255,255,255,.06); z-index:50}
    :root[data-theme='light'] header{background:rgba(255,255,255,0.9); border-bottom:1px solid rgba(0,0,0,.06)}
    .nav{display:flex; align-items:center; justify-content:space-between; gap:18px}
    .brand{display:flex; align-items:center; gap:10px; font-weight:700}
    .logo{width:34px; height:34px; background:conic-gradient(from 220deg,var(--brand),var(--brand-2)); border-radius:10px}
    .cta{background:linear-gradient(90deg,var(--brand),var(--brand-2)); color:#fff; font-weight:700; padding:10px 14px; border-radius:12px; border:none; cursor:pointer}
    .cta:focus{outline:2px solid var(--ring); outline-offset:2px}
    .btn{display:inline-flex; align-items:center; gap:8px; padding:10px 12px; border-radius:12px; border:1px solid var(--border); background:var(--card); color:var(--text); cursor:pointer; transition:transform .2s ease, box-shadow .2s ease}
    .btn:hover{transform:translateY(-1px); box-shadow:0 6px 16px rgba(0,0,0,.18)}

    /* Toggle animation */
    .theme-toggle{display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:999px; border:1px solid var(--border); background:var(--card); color:var(--text)}
    .toggle-dot{width:22px; height:22px; border-radius:50%; background:conic-gradient(from 180deg,var(--brand),var(--brand-2)); display:inline-block; transition: transform .45s cubic-bezier(.2,.8,.2,1)}
    .spin .toggle-dot{transform: rotate(360deg)}

    .hero{display:grid; grid-template-columns:1fr 1fr; gap:28px; align-items:center; padding:44px 0}
    .card{background:var(--card); border:1px solid var(--border); border-radius:18px; padding:22px; transition: background .3s, color .3s}
    .pill{display:inline-flex; align-items:center; font-size:12px; font-weight:700; background:linear-gradient(90deg,var(--brand),var(--brand-2)); padding:6px 10px; border-radius:999px; color:#fff}
    h1{font-size:40px; margin:10px 0 12px}
    p.lead{color:var(--muted); font-size:16px}
    .grid-2{display:grid; grid-template-columns:1fr 1fr; gap:18px}
    .section{padding:24px 0}
    h2{font-size:26px; margin:0 0 10px}
    h3{font-size:18px; margin:0 0 6px}
    .muted{color:var(--muted)}
    .row{display:flex; gap:10px; flex-wrap:wrap}

    /* Interest chips with icons + hover expand */
    .chip{background:var(--card); border:1px solid var(--border); padding:14px 18px; border-radius:999px; cursor:pointer; display:inline-flex; align-items:center; gap:12px; transition:transform .18s ease, box-shadow .18s ease, outline-color .18s ease; color:var(--text); font-size:15px}
    .chip .ico{font-size:18px; transition: transform .18s ease}
    .chip:hover{transform:translateY(-2px) scale(1.08); box-shadow:0 10px 24px rgba(0,0,0,.25)}
    .chip:hover .ico{transform: scale(1.2)}
    .chip.selected{outline:2px solid var(--ring)}

    /* Form layout: spacious */
    .form-grid{display:grid; grid-template-columns:1fr 1fr; gap:12px}
    .field{background:var(--card); border:1px solid var(--border); border-radius:12px; padding:12px}
    label{display:block; font-weight:600; margin-bottom:8px}
    input[type="range"], select{width:100%}
    select, input[type="range"], input[type="checkbox"]{background:var(--card); color:var(--text); border:1px solid var(--border); border-radius:10px; padding:8px}
    .inline{display:flex; align-items:center; gap:8px}

    .hint{font-size:12px; color:var(--muted)}
    .foot{margin-top:26px; font-size:12px; color:var(--muted)}

    dialog{border:none; border-radius:16px; padding:0; overflow:hidden; max-width:660px; width:96vw; background:var(--card); color:var(--text)}
    dialog::backdrop{background:rgba(1,6,16,.7)}

    /* Sample result layout — roomier */
    .result-box{padding:26px; border-radius:16px; background:var(--card); margin-top:12px; min-height:260px}
    .result-line{display:flex; align-items:center; gap:16px; margin-bottom:16px}
    .members{display:flex; flex-wrap:wrap; gap:16px}
    .avatar{width:36px; height:36px; border-radius:50%; background:linear-gradient(90deg,var(--brand),var(--brand-2))}

    /* WhatsApp-like chat illustration */
    .wa{border:1px solid var(--wa-border); border-radius:16px; overflow:hidden}
    .wa-h{background:var(--wa-header); color:#fff; padding:10px 12px; display:flex; align-items:center; gap:10px}
    .wa-h .ai-ava{width:28px; height:28px; border-radius:50%; background:#fff; color:#075E54; display:flex; align-items:center; justify-content:center; font-weight:700}
    .wa-b{padding:14px; background:linear-gradient(180deg, rgba(0,0,0,.02), transparent)}
    .wa-b .bubble{max-width:78%; padding:10px 12px; border-radius:14px; border:1px solid var(--wa-border); margin:6px 0}
    .wa-b .in{background:var(--wa-in); align-self:flex-start}
    .wa-b .out{background:var(--wa-out); align-self:flex-end; margin-left:auto}

    @media(max-width:900px){.hero{grid-template-columns:1fr;}.grid-2{grid-template-columns:1fr}.form-grid{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <header>
    <div class="wrap nav">
      <div class="brand"><div class="logo"></div> SettleIn</div>
      <div class="row">
        <button id="themeToggle" class="theme-toggle"><span class="toggle-dot"></span><span>Theme</span></button>
        <button class="cta" onclick="document.getElementById('connect').scrollIntoView({behavior:'smooth'})">Connect</button>
      </div>
    </div>
  </header>

  <main class="wrap">
    <section class="hero">
      <div class="card">
        <span class="pill">For international & local students</span>
        <h1>Find your circle. Feel at home.</h1>
        <p class="lead">SettleIn places you in small 5–7 person chats matched by interests. An AI host sends daily prompts so conversations start naturally. The Tell‑me‑about‑you! quiz adapts your toolkit with tips, stories, and Hug Mode for instant grounding.</p>
        <div class="row" style="margin-top:14px">
          <button class="btn" onclick="document.getElementById('sample').scrollIntoView({behavior:'smooth'})">Give it a try</button>
          <a class="cta" href="chat.html">Connect</a>
        </div>
      </div>
      <div class="card stack">
        <h3>How group chat works</h3>
        <div id="chatIllustration" class="wa">
          <div class="wa-h"><div class="ai-ava">S</div><div><strong>SettleIn</strong><br><span class="hint" style="color:#eaf2ff; opacity:.9">online</span></div></div>
          <div class="wa-b" id="waBody" style="display:flex; flex-direction:column"></div>
        </div>
        <div class="row"><button class="btn" onclick="newIllustration()">New example</button></div>
      </div>
    </section>

    <!-- NEW: full-width Hug Mode band above the sample section -->
    <section id="hug" class="section">
      <div class="card" style="display:flex; align-items:center; justify-content:space-between; gap:16px; flex-wrap:wrap">
        <div>
          <h3 style="margin:0 0 6px">One‑tap Hug Mode</h3>
          <p class="muted" style="margin:0">Tap once for a 30‑second grounding: breathe, orient, reset.</p>
        </div>
        <button class="cta" onclick="openHug()">Start Hug Mode</button>
        <dialog id="hugModal">
          <div class="modal-body stack" style="padding:18px">
            <ol>
              <li>Look around and name 5 things you see.</li>
              <li>Breathe in for 4, hold 4, out 6 — repeat 3×.</li>
              <li>Affirm: “Transition is hard, and I’m doing my best.”</li>
            </ol>
          </div>
        </dialog>
      </div>
    </section>

    <section id="sample" class="section">
      <div class="card">
        <h2>Give it a try</h2>
        <p class="muted">Pick a few interests and complete the <strong>Tell me about you!</strong> quiz. We’ll allocate a sample group and show a login button to join.</p>
        <div class="grid-2">
          <div class="stack">
            <h3>1) Choose interests</h3>
            <div id="interestChips" class="row"></div>
            <span class="hint">Choose at least 3.</span>

            <h3 style="margin-top:14px">2) Tell me about you!</h3>
            <div class="form-grid">
              <div class="field">
                <label for="quizMood">Current vibe</label>
                <div class="inline"><input type="range" id="quizMood" min="0" max="3" step="1" value="1"><span class="hint">0 Honeymoon → 3 Integration</span></div>
              </div>
              <div class="field">
                <label for="quizLang">Language confidence</label>
                <div class="inline"><input type="range" id="quizLang" min="0" max="3" step="1" value="2"><span class="hint">0 Struggling → 3 Very confident</span></div>
              </div>
              <div class="field">
                <label for="quizSocial">Social energy</label>
                <div class="inline"><input type="range" id="quizSocial" min="0" max="3" step="1" value="1"><span class="hint">0 Small groups → 3 Big crowds</span></div>
              </div>
              <div class="field">
                <label for="quizLoc">Location</label>
                <select id="quizLoc"></select>
              </div>
              <div class="field">
                <label class="inline"><input type="checkbox" id="quizSleep"> Sleep/routine is off</label>
                <span class="hint">Routines help mood</span>
              </div>
              <div class="field">
                <label class="inline"><input type="checkbox" id="quizHomesick"> Missing home often</label>
                <span class="hint">Totally normal during transition</span>
              </div>
              <div class="field">
                <label class="inline"><input type="checkbox" id="quizBudget"> Budget stress right now</label>
                <span class="hint">We’ll share low‑cost ideas</span>
              </div>
            </div>
            <div class="row" style="margin-top:8px">
              <button class="btn" onclick="runSample()">Generate</button>
              <button class="btn" onclick="clearSample()">Reset</button>
            </div>
          </div>

          <div class="stack">
            <h3>Results</h3>
            <div class="result-box" id="matchResult">
              <p class="muted">Your group, stage & advice will appear here after you generate.</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="connect" class="section">
      <div class="card">
        <h2>Ready to connect?</h2>
        <a id="connectBtn" class="cta" href="chat.html">Connect</a>
      </div>
    </section>

    <p class="foot">© 2025 SettleIn · Demo purposes only</p>
  </main>

  <script>
    // ===== Theme toggle with animation =====
    (function(){
      const root=document.documentElement;
      const btn=document.getElementById('themeToggle');
      const saved=localStorage.getItem('settlein_theme');
      if(saved && saved!=='dark') root.setAttribute('data-theme', saved);
      btn.addEventListener('click',()=>{
        btn.classList.add('spin');
        const next=root.getAttribute('data-theme')==='light'?'dark':'light';
        if(next==='dark') root.removeAttribute('data-theme'); else root.setAttribute('data-theme','light');
        localStorage.setItem('settlein_theme', root.getAttribute('data-theme')||'dark');
        setTimeout(()=>btn.classList.remove('spin'), 500);
      });
    })();

    // ===== Populate Location select (Melbourne & nearby suburbs) =====
    (function(){
      const suburbs=['All Melbourne','Melbourne CBD','Docklands','Southbank','Carlton','Parkville','Fitzroy','Collingwood','Richmond','Abbotsford','Hawthorn','Kew','Camberwell','Balwyn','Toorak','South Yarra','Prahran','St Kilda','Elwood','Brighton','Elsternwick','Caulfield','Malvern','Armadale','Glen Iris','Burwood','Ashburton','Glen Waverley','Mount Waverley','Box Hill','Doncaster','Doncaster East','Templestowe','Clayton','Clayton South','Springvale','Noble Park','Dandenong','Oakleigh','Hughesdale','Murrumbeena','Carnegie','Chadstone','Bentleigh','Bentleigh East','Moorabbin','Hampton','Sandringham','Cheltenham','Mentone','Parkdale','Mordialloc','Brunswick','Coburg','Pascoe Vale','Preston','Thornbury','Northcote','Heidelberg','Ivanhoe','Bundoora','Essendon','Moonee Ponds','Ascot Vale','Kensington','Flemington','Footscray','Yarraville','Seddon','Newport','Williamstown','Altona','Sunshine','St Albans','Werribee','Hoppers Crossing','Tarneit','Point Cook'];
      const sel=document.getElementById('quizLoc');
      suburbs.forEach(s=>{const o=document.createElement('option');o.value=s;o.textContent=s; sel.appendChild(o)});
      sel.value='All Melbourne';
    })();

    // ===== Prompts & WhatsApp-style illustrative chat =====
    const RESPONSES={
      basketball:[
        {u:'SettleIn',t:"Today’s prompt: Who’s the most underrated NBA player right now?",k:'host'},
        {u:'Gio',t:'Jrue Holiday—elite defense that doesn’t always show on the stat sheet.'},
        {u:'Leo',t:'Mike Conley. Leadership is underrated.'},
        {u:'Ben',t:'Derrick White does it all.'}
      ],
      anime:[
        {u:'SettleIn',t:'Today’s prompt: Which anime comforts you when stressed?',k:'host'},
        {u:'Ari',t:'Mushishi, the pacing is so calm.'},
        {u:'Emi',t:'Haikyuu!! always boosts me.'},
        {u:'Iris',t:"Natsume’s Book of Friends is my cozy pick."}
      ],
      music:[
        {u:'SettleIn',t:'Today’s prompt: What song instantly lifts your mood?',k:'host'},
        {u:'Jay',t:'“Ribs” by Lorde.'},
        {u:'Kai',t:'“Home” by Edward Sharpe.'},
        {u:'Chloe',t:'“Yellow” for nostalgia.'}
      ]
    };
    function newIllustration(){
      const keys=Object.keys(RESPONSES);
      const key=keys[Math.floor(Math.random()*keys.length)];
      const convo=RESPONSES[key];
      const body=document.getElementById('waBody');
      body.innerHTML=convo.map(m=>`<div class="bubble ${m.k==='host'?'in':'in'}"><strong>${m.u}:</strong> ${m.t}</div>`).join('');
    }
    // init illustration
    newIllustration();

    function openHug(){document.getElementById('hugModal').showModal()}

    // ===== Interest chips with icons =====
    const INTEREST_ICONS={
      basketball:'🏀', anime:'🌀', hiking:'🥾', music:'🎧', gaming:'🎮', coffee:'☕', cooking:'🍳', movies:'🎬',
      photography:'📸', gym:'🏋️', boardgames:'🎲', kdrama:'🇰🇷', coding:'💻', volunteering:'🤝', running:'🏃', travel:'🌏'
    };
    const INTERESTS=['basketball','anime','hiking','music','gaming','coffee','cooking','movies','photography','gym','boardgames','kdrama','coding','volunteering','running','travel'];
    const interestChips=document.getElementById('interestChips');
    const selected=new Set();
    INTERESTS.forEach(name=>{
      const b=document.createElement('button');
      b.className='chip'; b.innerHTML=`<span class="ico">${INTEREST_ICONS[name]||'✨'}</span><span>${name}</span>`;
      b.onclick=()=>{ if(selected.has(name)){selected.delete(name); b.classList.remove('selected')} else {selected.add(name); b.classList.add('selected')} };
      interestChips.appendChild(b);
    });

    // ===== Demo group allocation with simple filtering by location =====
    const POOL=[
      {name:'Ari', loc:'Carlton', tags:['anime','music','coffee','kdrama']},
      {name:'Ben', loc:'Richmond', tags:['basketball','gym','movies','coffee']},
      {name:'Chloe', loc:'Glen Waverley', tags:['hiking','photography','travel','coffee']},
      {name:'Dev', loc:'Footscray', tags:['gaming','coding','music','boardgames']},
      {name:'Emi', loc:'St Kilda', tags:['kdrama','cooking','anime','movies']},
      {name:'Finn', loc:'Preston', tags:['running','hiking','gym','travel']},
      {name:'Gio', loc:'Docklands', tags:['basketball','gaming','movies','music']},
      {name:'Hana', loc:'Clayton', tags:['cooking','coffee','photography','volunteering']},
      {name:'Iris', loc:'Brunswick', tags:['boardgames','anime','movies','music']},
      {name:'Jay', loc:'Southbank', tags:['coding','gaming','coffee','movies']},
      {name:'Kai', loc:'Northcote', tags:['travel','photography','music','running']},
      {name:'Leo', loc:'Caulfield', tags:['basketball','gym','gaming','movies']}
    ];

    function allocateGroup(myTags, loc){
      let picks=[...POOL].filter(p=>p.tags.some(t=>myTags.includes(t)));
      if(loc && loc!=='All Melbourne') picks = picks.filter(p=>p.loc===loc) || picks;
      while(picks.length<4){ const r=POOL[Math.floor(Math.random()*POOL.length)]; if(!picks.includes(r)) picks.push(r); }
      const size=5+Math.floor(Math.random()*3); // 5-7
      return picks.slice(0,size-1);
    }

    const STAGE_TIPS={
      honeymoon:['Capture “firsts” in a micro‑journal.','Sample low‑stakes events to test communities.'],
      frustration:['Anchor sleep & meals; routines help mood.','Normalize wobbliness—this dip is very common.'],
      adjustment:['Set one weekly mini‑goal with your circle.','Use a 2 comfy : 1 new activity ratio.'],
      integration:['Share a short story to help others.','Create a group tradition (Fri coffee, Sun run).']
    };

    function stageFromQuiz(){
      const mood=+document.getElementById('quizMood').value; // 0..3
      const lang=+document.getElementById('quizLang').value; // 0..3
      const social=+document.getElementById('quizSocial').value; // 0..3
      const sleep=document.getElementById('quizSleep').checked;
      const homesick=document.getElementById('quizHomesick').checked;
      const budget=document.getElementById('quizBudget').checked;
      let idx=mood;
      if(homesick && idx<2) idx=1; // nudge to frustration
      if(!sleep && lang>=2 && idx<3) idx=Math.max(idx,2);
      if(social>=3 && idx<3) idx=Math.max(idx,2);
      const names=['honeymoon','frustration','adjustment','integration'];
      return {stage:names[idx], meta:{lang,social,sleep,homesick,budget}};
    }

    function renderMembers(mates){
      return mates.map(m=>`<span class="chip" style="padding:14px 18px"><span class="avatar"></span><span>${m.name}</span><span class="hint" style="margin-left:8px">· ${m.loc}</span></span>`).join(' ');
    }

    function pick(arr){return arr[Math.floor(Math.random()*arr.length)]}

    function runSample(){
      const picks=[...selected];
      if(picks.length<3){ alert('Choose at least 3 interests.'); return; }
      const {stage}=stageFromQuiz();
      const loc=document.getElementById('quizLoc').value;
      const mates=allocateGroup(picks, loc);
      const groupId='alpha-'+(100+Math.floor(Math.random()*900));
      const tip=pick(STAGE_TIPS[stage]);

      const target=document.getElementById('matchResult');
      target.innerHTML=`
        <div class="stack" style="gap:16px">
          <div class="result-line"><span class="pill">Group · ${groupId}</span><span class="hint">${mates.length+1} members</span></div>
          <div class="hint">Location preference: <strong style="color:var(--text)">${loc}</strong></div>
          <div class="members">${renderMembers(mates)} <span class="chip selected" style="padding:14px 18px"><span class="avatar"></span>You</span></div>
          <div class="card" style="background:var(--card)"><strong>Your stage:</strong> ${stage.toUpperCase()}<br><span class="muted">Tip:</span> ${tip}</div>
          <div class="row">
            <a class="cta" id="loginJoin" href="login.html?next=${encodeURIComponent('chat.html?groupId='+groupId+'&stage='+stage+'&loc='+encodeURIComponent(loc))}">Log in to join group</a>
          </div>
          <span class="hint">We’ll pass your <span class="mono">groupId</span>, stage & location to the chat after login.</span>
        </div>`;

      document.getElementById('connectBtn').href=`chat.html?groupId=${groupId}&stage=${stage}&loc=${encodeURIComponent(loc)}`;
    }

    function clearSample(){
      selected.clear();
      [...interestChips.children].forEach(c=>c.classList.remove('selected'));
      document.getElementById('matchResult').innerHTML='<p class="muted">Your group, stage & advice will appear here after you generate.</p>';
      document.getElementById('connectBtn').href='chat.html';
    }
  </script>
</body>
</html>
